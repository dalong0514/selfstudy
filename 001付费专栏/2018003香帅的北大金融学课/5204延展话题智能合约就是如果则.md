# 5204. 延展话题：智能合约就是「如果…则…」
> 香帅的北大金融学课
2018-12-06

我猜，我们每个同学都应该见过一样东西，自动售货机。你现在在学校、机场、地铁站这些公共场合，都能看到自动售货机，投入几块钱，一瓶汽水或者薯片就滚出来，零钱找回来。

那为什么我要跟你提自动售货机呢？因为你可能没有意识到，这些不起眼的自动售货机，背后其实是一种关乎未来的技术。那就是我在前面课程里跟你讲到的智能合约。

智能合约也不是什么神秘的事，我们常见的自动售货机就是智能合约（smart contract）的原始版本。

而区块链技术，将这种合约的智能推到了一个更高的高度。

今天要讲的智能合约，也是被认为区块链技术最有希望落地的一个应用。所以，今天我们来弄清楚，到底什么是智能合约，它和区块链之间是什么关系，以及会对我们的行业产生什么影响。

## 一、智能与合约
好，我们首先来弄清一下，什么是智能合约。

先想一下什么叫合约。合，协作一致；约，契约。也就是说双方确立权利义务的一种契约，对吧？

其实，你能想到的人类社会关系，很少有不是合约关系的。婚姻、就业、买房，这是你看得见的白纸黑字的合约。商场里，网络上，银货两讫的交易是看不见的合约。还有所有的机构都是合约关系的产物。按照经济学诺奖得主科斯的定义，公司就是一连串的合约。包括雇员与雇员之间的合约，雇员和雇主之间的合约，生产与销售之间的合约等等。国家也是，从中国古代的城下之盟，到欧盟区，再到国际贸易，汇率战争，没有哪一样不是合约关系。可以说合约（contract）是我们这个世界正常运行的一个基本要素。

那什么叫智能合约呢？智能的意思就是可以自动重复执行的合约。

以自动售货机为例，通过这么一个简单的机制设置，任何一个买东西的人都会直接和供应商交易，然后售货机根据显示的商品价格收取费用，传送商品，人付钱，拿到商品。每一次都是一个点对点的交易，只不过是很多次点对点交易中的共性被计算出来，形成了一个自动的合约。所以，所谓自动，就是合约的执行不依赖于人力，是机器主动和动态地去执行。

好，根据这个逻辑，你就马上知道了，合约其实是帮助个人、机构，还有财产之间达成一种共识，形成某种关系。而智能合约则是使这种共识或者关系能够重复进行下去的机制设置。

到这里，我想学过一点计算机语言的同学就应该恍然大悟了，这不就是我们最简单的「if……then……」，「如果……则……」的语句吗？相当于触发某个条件，if 之后，就 then 执行某个过程。

## 二、基于区块链的智能合约
你的理解非常地正确，实际上智能合约的概念是一个超牛的计算机天才尼克·萨博在 90 年代提出来的。和大多数IT天才一样，萨博对交易中这种第三方授信的模式特别地怀疑。

比如说，在网上购物的时候，是怎么保证对方会信守承诺的呢？用信用卡、支付宝这种第三方的担保。支付宝和信用卡的信用又从何而来呢？萨博一直认为，这种第三方的信用都是不可靠的。

能不能设计一种机制，让计算机可以自动地完成和执行合约的任务，不需要任何第三方的中介信用？

这句话是不是听着很耳熟，对吗？对的。比特币、区块之间去中介化、点对点这些概念的发明者都是萨博。所以，在很长一段时间里，人们还猜测，萨博是不是就是那个神龙见首不见尾的比特币创始人中本聪。

所以，萨博就认为，所有的交易合同都没有必要通过第三方完成，只要合同的条款可以用编程语言来表达，让计算机自动处理就行了。这样就避免了合同执行中的尔虞我诈，还节约了大量的交易成本。

这个设想当然是很天才的。但是，你发现没有，它里面有两个漏洞。

第一个，交易是要涉及到资产的转移的，假如说一个交易完成以后，资金的转移还要到银行去进行，那就丧失了智能的意义了。所以，为了全程实现计算机的控制，交易的资产必须是以数字资产的方式存储和呈现。

第二个，计算机程序存在着被篡改的风险。所以，怎么确定合约条款的可信度也是个大问题。

就因为这两个原因，在萨博提出智能合约这个概念以后，很长时间内就停留在自动售货机、自动售票机这种比较初级的模式上，没有找到真正的突破口。

好，直到区块链出现以后，这两个问题算是有了答案。区块链具有信息不可篡改，去中心化的性质，完全使得交易合约的条款可信度有了保证，然后比特币的成功又让人们看到了数字加密资产也完全具有可行性。这两点突破以后，一种基于区块链的智能合约就浮出水面了。

在这里面，智能合约仍然是一段代码，比如我开始说的「if……then……」这个语句。但是，这个代码是存在于区块链上的，也就是说分布在所有人的账本上。而且，只要这个交易条件符合，程序就开始自动执行，完成数字资产的转移。

你从这个角度理解，就会发现，智能合约在这里面扮演的是什么角色呢？它是一个技术仲裁者的角色，它依靠区块链的技术特性，保证着合约按照规则来执行，而不再担心各种违约和失信的行为。

好，这里如果你理解起来有点抽象的话，我给你举个娱乐圈的例子。

2018 年 11 月份，著名导演张艺谋的新片《影》，就和中央音乐学院闹出了纠纷。事情是这样的，中央音乐学院有20多位老师和学生参与了《影》这个电影的配乐工作，但制片方后来又请了一位音乐人添加了一点商业元素。结果，在影片的公映版中，却没有署上这20位多老师和学生的名字，理由是说，已经不是他们的原创了。然后，这些人到电影院一听，他们发现电影的曲子基本上就是他们作的原版，只不过是换了一批演奏员而已。这20位老师和学生当然就很生气了，就一纸诉状将《影》告上了法庭。

按照一般惯例，这种案子打起来是比较费力的，因为双方扯皮打架，各执一词，所以，法庭也需要大量的人力、物力来调节和处理。而且最后的结果也特别难以判断。

但如果这是一个链上的智能合约，事情就简单多了。因为所有的合同条款、内容都上链，然后程序去判断，电影是不是使用了这些作曲家的作品？是否署名了？如果制片方违约了，那合约就会自动执行，数字资产就会自动地进行划拨，进行强制的执行。

所以，这种基于区块链的智能合约，被认为是一个很有潜力的场景。现在美国的很多创业公司也在这个方向上发力。

那同样的道理，通过区块链上的智能合约，现在的征信行业、追债行业都会面临着巨大冲击。因为合同是自动按照规则执行的，不以合同双方的主观意愿为转移，这样「老赖们」的生存空间就会被压缩很多了。

## 三、局限
所以，这也就是为什么区块链的概念起来以后，智能合约也闯进了我们的视野。因为区块链技术使得智能合约似乎变得很可行。但是，这也和区块链其它的应用一样，在有机会大规模改善合约的执行效率的同时，智能合约其实也面临着自己的问题。

第一，安全性问题。这就是我跟你说过的，一个企业或者一种技术，它的盔甲往往就是它的软肋。基于区块链的智能合约最大的优点是什么呢？就是按照合同条款，不折不扣，不可逆地执行。但问题也出在这儿，假设说你不幸签署了一个欺诈的合同，交易也会不可逆地执行。

平时如果碰到这种事情，我们有机会通过中心化的系统来撤销合约。但如果是智能合约，就不行，因为它不可逆。所以，它的安全性是存在问题的。

第二，隐私性问题。要是智能的话就必须上链，上链之后，这个合约的代码对所有节点就是公开的了。这可能会引发其他非合约参与者的反应。

比说你和对手现在签了一个衍生品互换合同，这个信息会在链上公布。即使其它的机构不知道你是谁，但是，这个信息就足够让它们来进行套利，这无疑会损害交易者的利益。这样，就会使得大家缺乏去上链制定智能合约的动力了。

所以，这两个问题带来的成本是智能合约的开发者们都必须面对的问题。这也再一次证明了，这一周的区块链课程里，我一直在跟你强调的一个事情，区块链代表着未来的技术，但是和所有技术落地、应用、成熟的过程一样，区块链技术也注定会在很长的路上跋涉很久。当然，在这个过程中，能领先一步的人就有机会走在人群的前列。

## 香帅
好，课程的最后给你留下今天的思考题：今天课程里我们讲了智能合约的好处，也讲了智能合约的「坏处」。我想请你用一个例子或一个场景说出智能合约和传统合约中的三个差异，然后你判断在你用的这个例子，或者这个场景上，智能合约面临的前景和挑战到底是什么。

我觉得通过这么一个思考的过程，你就可能会对智能合约和传统合约之间的区别理解得更加透彻，对智能合约在未来的应用方向也会有更精准的理解。

好了，欢迎你把你的深度思考放在留言区跟我们一块儿分享。