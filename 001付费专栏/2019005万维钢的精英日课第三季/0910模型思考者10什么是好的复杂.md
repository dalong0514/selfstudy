# 0910. 模型思考者10：什么是「好的」复杂
> 万维钢·精英日课³
2019-08-26

我们继续讲斯科特·佩奇的《模型思考者》。我们要讲一个特别重要也特别美好的数学概念，叫「李雅普诺夫函数（Lyapunov function）」，它是以俄国数学家亚历山大·李雅普诺夫命名的。这个东西已经有超过一百年的历史，但是并没有在民间流行。
理解了李雅普诺夫函数，你就能领略一点数学家的思维方式，看看数学家如何从一个问题中提炼出一个好思想，然后把它推广到其他问题中去。你还可以获得一个对世界的洞见，然后用这个洞见去处理一些真问题。
我们想研究复杂系统的均衡态。
均衡，我们已经说过多很多次了。博弈论里有「纳什均衡」，经济学讲的「有效市场」也是均衡，上周我们讲到「马尔可夫过程」最终也会走向一个均衡。
什么是均衡呢？说白了，就是不管你这个系统有多复杂，不管一开始有多么动荡，它最终会达到一个稳定的、井井有条的状态。比如我们身处的现代社会很复杂，每个人都是自由的，你今天上班也行，请假不上班也行，你愿意购物还是旅行都可以，可是整个社会不会乱，不会动荡不安，这就是均衡。
我们要问的是，一个复杂系统需要满足什么样的条件，才能确保会达到均衡呢？这个问题听起来很难，但是数学家找到了一个特别简单的解，这就是李雅普诺夫函数。
1.李雅普诺夫函数
咱们想象一个虚拟的场景。从今年开始，美国每个州都实行一项福利政策，给最无助的穷人发放补贴金。有的州给每人发1000美元，有的州发800美元。这是一个献爱心的事儿，各州都要表示一下，但是又都不想比别的州发得多，不然困难人群就都搬到你这个州来领补贴了。
我们设想一个这样的数学模型。第一年，各州都不知道别的州发多少钱，给的数额都比较随意。从第二年开始，每个州发放的数额，都至少要比前一年所有州平均值的2/3，再少一块钱。
那请问在这种情况下，经过若干轮的演化之后，系统会达到一个什么样的状态？
答案是一个最终每个州都不给钱的均衡态。
这个道理比较容易想明白，但是咱们使用一个正规的证明方式。我们设想这么一个函数 L：
L = 每年给钱最多的州给了多少钱
咱们看看 L 的取值会怎么变化。不管第一年 L 是多少，第二年的 L 肯定会比第一年的 L 的2/3还要至少要少一块钱，……以此类推。L 显然满足下面这两个条件——
1. L 的取值，每一步都比前一步至少要减少一个固定的数值；
2. L 存在一个最小值。
满足这两个条件的函数，就叫李雅普诺夫函数。比如对咱们这个问题来说，不管前一年的 L 是多少，这一年的 L 至少比它少 1 块钱；而 L 的最小值是 0。
那么数学家提出一个定理，说对于任何复杂系统，只要你能在其中找到一个李雅普诺夫函数，这个系统就终将会演化到一个稳态。
为啥呢？因为系统演化的每一步，L 都至少要减少不是无限小的一点点 —— 这叫「不怕慢，就怕站」 —— 而 L 还有个最小值，所以 L 就终归会达到那个最小值。而到那个时候，就意味着系统进入了一个不变的状态，这就是一个均衡态。
希望减少福利的例子能帮你理解这个思想。各个州减少福利的游戏不会一直玩下去，等到减无可减，也就是大家都是 0，自然就是均衡。
现在咱们把这个思想再用一次。
2.自组织
社会活动为什么是一个均衡态呢？以前亚当·斯密提出「看不见的手」这个说法，说市场可以自动调节每个参与者的活动 —— 更现代的学者把个现象叫做「自组织」。可是到底为什么看不见的手这么有效，其实我们还需要一个数学证明。
我们考虑这么一个社会系统模型。社会中有多个地点，比如有咖啡馆、有健身房、有面包店等等，每个人可以任意选择在某个时刻去某个地点消费。时间长了之后大家都形成了各自的消费习惯。那么我们可以证明，这些习惯将是一个均衡态 —— 每个地点都不会特别拥挤或者特别冷清，一切都井井有条。
想要证明这一点，你只要能找到系统的一个李雅普诺夫函数就行。
我们先定义一个概念，叫「拥挤度」。对个人来说，你的拥挤度，就是在同一时间和同一地点，跟你一起做同一件事的人数。比如我到一个咖啡馆喝咖啡，如果除了我之外，现在还有20个人也在这里喝咖啡，我的拥挤度就是20。
然后我们定义这么一个函数 L，L = 全社会总的拥挤度，也就是把所有人的拥挤度加起来之和。
好，现在我们可以证明，如果社会上的人都比较理性，L 就是一个李雅普诺夫函数。
比如有一位王女士，本来每天早上8点钟去健身房健身，下午4点去喝咖啡。如果她发现早上健身的人很多，喝咖啡的人很少；而下午喝咖啡的人很多，健身的人很少，她就有可能改变自己的生活习惯。
如果王女士改为上午喝咖啡，下午去健身，我们看看社会总拥挤度 L 会发生什么变化。首先王女士现在去的两个地方的人都比以前少了，所以她自己的拥挤度会下降。再者，王女士在每个地点，都给那个地点所有的人都增加了一个拥挤度，而现在她改为都在低峰时候去，那么被她提供拥挤度的人数也会减少。所以不论是对自己还是对别人，王女士这个改变，都降低了 L 值。
如果系统中每个人都像王女士这样自我调整，L 就是一个不断下降的函数，而且L显然有一个最小值（因为再小也不会比 0 小），所以 L 是个李雅普诺夫函数。
那既然这个系统有李雅普诺夫函数，它就一定会达到一个拥挤度最低的均衡状态。你看这就是李雅普诺夫函数的妙处，也许这系统有很多个李雅普诺夫函数，而你只需要找到一个就行 —— 只要能找到一个，你就证明了系统的均衡性。
当然真实社会中并非每个人都像王女士这么「理性」，有的人就喜欢凑热闹，而且有时候一群人集体转移战场也会增加拥挤度……但是，那些情况并不常见。通常情况下人们都是避开拥挤，自我调节。这条路太堵了，我就换一条路。今天晚上电影院人太多，我就换个时间来看电影。
而因为你有了李雅普诺夫函数这个眼光，你就能判断，哪怕社会再复杂，它也终将会达到一个*相当*均衡的状态。
3.自由贸易
很多年以前我为了学英语，读过一本英文的《读者文摘》，其中有一篇文章的开头，让人过目不忘。那是一篇经济学家写的文章，说为什么我们应该提倡自由贸易呢？因为当商品发生交换的时候，买卖双方都会感到有利。
如果你愿意花50块钱买一本书，肯定是你觉得这本书对你的价值超过50块钱；而卖书的人则认为50块钱对他也是合算的，这样你们才能达成交易。
那既然如此，自由的商品交换中就应该存在一个李雅普诺夫函数，L = 社会总幸福度。
首先每发生一次商品交换，买卖双方的幸福度就会都增加一点，所以 L 增加。其次因为商品是有限的，社会总幸福度必然有一个极大值。这和我们前面说的 L 总减少而且 L 有极小值的道理一样 [1]，所以 L 是李雅普诺夫函数，所以社会应该会达到一个到处都是自由贸易的理想状态。
……可问题是为什么现在各国都有很多反对自由贸易的声音呢？为什么要搞贸易保护呢？因为我们定义的这个 L，其实没考虑周全。
每一次商品交换，的确是买卖双方都满意 —— 但是第三方可能会有人不满意。你俩的幸福度上升了，别人的幸福度却可能因为你俩这次交易而下降。
佩奇举的例子是伊拉克想用石油换巴基斯坦的原子弹技术。这两个国家的确是高兴了，可是国际社会可不干。邻国不希望伊拉克有原子弹，地区关系会变得紧张，别人不得不采取军备竞赛之类的行动，于是整个系统会不稳定。
一般国际贸易也是这样。中国的商品出口到美国，中国的商家挣到了钱很高兴，美国的老百姓买到便宜东西也很高兴，那谁不高兴呢？特朗普不高兴。美国那些因为进口中国商品而失去就业机会的生产者不高兴。
这种旁观者的不高兴，就是经济学家说的「负的外部性」。因为存在负外部性，前面说的那个 L 就不一定是李雅普诺夫函数。经济学家总是呼吁自由贸易的好处，而数学家一看就知道这个系统不会达到完全自由贸易的理想状态。
4.应用
李雅普诺夫函数这个思想很简单，所以也很有用。
佩奇有个学生，他上班的公司，有一次搬到了全新的办公室，老板突发奇想，说我们应该随机安排员工座位，然后允许任何两个员工互相调换座位。老板认为这个思路符合自由市场的原则，相信员工们会自组织，达到一个最优的平衡态。
但是佩奇的学生学过模型思维，马上就指出这么做不对！学生说换座位是能让换座位的双方满意，可是它有一个负的外部性啊 —— 他俩原来的邻座可能会不满意！邻座会想，你换座位是不是因为不喜欢我呢？而且你换这个人过来也没征求我的意见啊，我不喜欢他！所以换座幸福度不是李雅普诺夫函数。老板一听有道理，就打消了这个想法。
后来老板又有一个新想法，他买了各种不同款式的办公座椅，随机发给员工，然后让员工自由交换座椅。佩奇的学生一看这个是可行的，因为座椅只影响到交换的双方，第三方的人不在乎你坐什么样的椅子，其中没有负的外部性，所以幸福度是个李雅普诺夫函数……
*
也许就算不知道李雅普诺夫函数，你也能找到其中的问题 —— 但是有了李雅普诺夫函数这个概念，你从此就会对复杂系统的演化非常敏感。数学模型能让你的脑子里多一根弦。
咱们好好体会一下这个思想的妙处。不管是多复杂的系统，数学家说只要你能抓住其中一个关键变量，你就能证明它会是均衡的。
请注意这个道理反过来可不一定对：并不是所有均衡系统都有李雅普诺夫函数。就有一些系统，经验表明是均衡的，可是数学家就是没有找到它的李雅普诺夫函数，所以没办法证明它为什么一定会达到均衡……这在数学上是一类很有意思的问题。
李雅普诺夫函数，是数学家的战略性武器。
注释
[1] 或者如果你强行要求标准的李雅普诺夫函数定义，也可以定义 L = 幸福度极大值 - 社会总幸福度，道理就完全一样了。