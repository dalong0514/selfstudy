# 0002. 上手第一个微信小程序
启动开发工具后，新建一个项目。项目目录就新建一个空的，程序会自动识别默认一个普通启动模板，AppID 填小程序账户「设置」里的 AppID 信息。

## 1. 小程序代码结构简介
4 个的模块，最上面的「工具栏」，左边的「模拟器」，右边的「编辑器」，下面的「调试器」。

看一下基本的目录结构和代码结构。先不看上面的 2 个文件夹「pages 和 logs」，整个目录结构中有 4 个文件，这 4 个文件的作用就是帮我们注册一个微信小程序，然后帮我们配置微信小程序的全局信息，以及帮我们设置微信小程序的全局样式。

project.config.json 文件的作用是保存微信开发者工具的配置信息，大家一般都会根据自己的喜好做一些个性话的设置，例如界面的颜色，编译的配置等等，但换了另一台电脑后重新安装，往往还需要自己去重新配置。就是考虑到这一点，每个微信小程序的根目录下都有这个文件，换电脑时只需要把这个文件的代码导入进去即可。

app.js 主要是帮我们的微信小程序去注册一个微信小程序应用。

app.json 是帮我们进行一个微信小程序的一个全局配置，包括我们的一些网络请求的超时时间，还有一些窗口的表现，还有我们各个页面的一个注册路径等等。

app.wxss 是帮我们去设置微信小程序全局的一个样式。

接着我们看目录结构下的两个文件夹，pages 里存放的是我们微信小程序的页面，每个小程序页面是由四个文件组成，分别是 js 文件、json 文件、wxml 文件和 wxss 文件。

js 文件帮我们去处理小程序页面的逻辑和一些数据交互，json 文件是帮我们去配置小程序页面的配置信息，wxml 文件是帮我们展示小程序页面的一些元素和内容。wxss 文件是帮我们去设置小程序页面这些元素的样式。

utils 文件夹里的 util.js 文件存放的是一些工具的函数，可以达到代码复用的目的。

## 2. 小程序配置文件介绍
小程序的配置文件其实有 2 个，一个是 app.json 的全局配置文件，另一个是页面的配置文件。

全局的配置有 5 项，Pages/tabBar/networkTimeout/debug/navigationStyle，navigationStyle 就是 Window。

Pages 是注册微信小程序的所有页面；tabBar，小程序如果是一个多 tab 的应用，可以通过 tabBar 配置 tab 栏的表现；networkTimeout 设置我们各个网络请求它的一个超时时间；可以通过开启 debug 的模式在微信开发者工具控制台里打印出我们需要的一些调试信息；通过 navigationStyle 来设置 window 对象的配置属性，比如导航栏的相关设置信息，导航栏的背景颜色「navigationBarBackgroundColor」，导航栏的标题颜色「navigationBarTextStyle」，导航栏的标题「navigationBarTitleText」，还有窗体的表现，比如窗体的背景颜色「backgroundColor」，窗体在下拉时它文字的样式「backgroundTextStyle」，通过 enablePullDownRefresh 这个选项可以设置微信小程序全局或单个页面的下拉刷新的一个表现。页面可以通过 disableScroll 这个选项去设置页面是否开始滚动。

如果小程序的全局和单个页面的 window 的一些配置项重复了，页面配置项会覆盖掉全局的配置项。

## 3. 开发者工具详解
### 工具栏
> 编译模式

编译模式里可以选择「添加编译模式」来自定义编译条件，比如我们的启动页面和页面的启动参数，以及我们需要进入的一些场景值。

> 远程调试

真机的远程调试功能，会通过我们的网络连接对手机运行的小程序进行一个调试。

> 切后台

切后台可以帮我们快速地切到不同的场景值。

> 上传

把小程序代码上传到管理后台，会默认设置为我们的一个开发版本。

> 测试

每 24h 生成一个测试报告，微信会给我们随机分配 4 到 8 种的机型，来测试小程序页面的一个首屏加载时间，CPU 占比等这些指数。

> 腾讯云

第三方平台，可以快速地帮我们去构建一个小程序的开发环境和线上环境。

> 详情

项目设置、域名信息、腾讯云的状态等等。

项目设置里可以切换「调试基础库」；可以设置一些编译的配置，比如 ES6 转 ES5 上传代码的时候，自动帮我们补全这个样式；自动上传时自动压缩我们的小程序代码；比如选择不校验一些安全域名 web-view 的域名。

域名设置里，各个网络请求设置的一个域名，包括 request 的域名、socket 请求的域名等等。

### 小程序的版本
一共五个，预览版本、开发版本、体验版本、审核版本和线上版本。

通过预览版本来预览小程序在我们手机上是一个什么样的表现。

开发版本是上传之后，本地代码上传成了一个具有版本号的应用，那么拥有开发者权限的成员就可以通过小程序开发助手来看到开发版本。

体验版本是在小程序管理后台可以直接将我们的开发版本，切换成体验版本，那么具有体验权限的成员就可以看到体验版本了。

开发版本要升级为线上版本的话，先提交审核，就成了审核版本，审核通过就是线上版本了。

### 调试器
Console 模块打印小程序页面的一些调试 log 信息。

Sources 模块列出页面的所有脚本文件，可以对这些脚本文件进行断点调试。

Network 模块展示各个网络请求的一个状态信息，以及所请求资源的一个响应数据等等。

Storage 模块通过调用 wx.setStorage 和 wx.setStorageSync 这两个函数来设置缓存时，可以动态的去修改这些缓存数据。

Appdata 模块是页面上真实展示的一个数据，可以在这里动态地修改来查看模拟器里，页面在不同设备上的兼容性情况。

Wxml 模块展示了页面各个组件元素，对组件元素的样式属性进行修改。

Sensor 模块地理位置信息、设备旋转角度的一个展示，这里可以动态地区修改地理位置信息，来模拟小程序页面在不同地理位置下的表现。

Application 模块

Security 模块

Audits 模块

## 4. 创建第一个小程序
 一个小程序必须要有 app.js 和 app.json 这两个文件。点「编辑器」做上角的 + 来添加这两个文件。

app.js 如何帮我们去注册一个微信小程序应用呢，需要调用一个 App 函数，传入 Object 类型的参数，在这个参数里面主要可以传入生命周期钩子和一些事件处理函数，以及全局的一个数据。先输入一个空参数。

`App()`

接着创建 app.json 文件，在这个文件里注册小程序所有页面的一个路径。通过 pages 属性来注册，它的值是一个 list 类型的，list 是所有页面的一个页面路径。

`{
	"pages"[
	]
}`

要写 helloworld 至少得有一个页面，所以需要去创建一个helloworld 的页面。创建页面需要的 4 个文件。

先建个 helloworld.wxml 文件，这个文件就是描述页面上要有哪些内容。可以通过 view 标签来写个简单的文本 helloworld。

`<view>Hello Daglas</view>`

接着建个 helloworld.js 文件，这个文件是帮助我们去注册一个页面，类似于 app.js 去注册一个小程序。它是通过一个配置函数 Page 来实现的，这个配置函数也需要传入一个 object 参数，这个参数传入页面的生命周期钩子、事件处理函数和一些默认的数据等等，也先传入个空值。

`Page()`

再创建个 helloworld.json 文件，这个是 helloworld 页面的一些配置，至少要传入一个空的配置对象。

`{}`

最后建个 helloworld.wxss 文件，这个文件用来描述小程序页面的一个样式。这个文件不写代码也可以。

这四个文件前面的名字要保持一样。

然后再 app.json 文件里去注册刚刚建的 helloworld 这个页面的路径。因为这个页面是在根目录下，所以就填个文件名即可。

`{
	"pages"[
	"helloworld"
	]
}`

这样就做好了。但我们一般不把页面的4个文件放在根目录下的，去项目文件夹里新建文件夹 pages 和 helloworld 两个文件夹，把 4 个页面文件拖到 helloworld 文件夹里，再把 helloworld 文件夹拖到 pages 文件夹里，接着把页面的路径改下，这样就清爽很多了。

`{
	"pages"[
	"pages/helloworld/helloworld"
	]
}`

现在想让文本居中，在 wxss 文件里对 view 这个标签进行一个样式的定义。

`view {
	width: 100%;
	height: 40rpx;
	text-align: center;
}`


